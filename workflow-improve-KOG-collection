---> idea for making this easier, at the moment the KOGs are separated manually which will be a pain in the arse

%export all CEGMA files together

cat pre-KOG-all.fasta | tr -d "?" > KOG-all.fasta 

%scp library file

%search and output names of hits into table
/panfs/panspermia/125155/programs/hmmer-3.1b2-linux-intel-x86_64/binaries/hmmsearch --tblout KOG*.tbl KOG*.hmm KOG-all.fasta

%make index for input file
/panfs/panspermia/125155/programs/hmmer-3.1b2-linux-intel-x86_64/binaries/esl-sfetch --index KOG*.fasta

%use table to extract sequences with hits
grep -v "^#" KOG*.tbl | gawk '{print $1}' | /panfs/panspermia/125155/programs/hmmer-3.1b2-linux-intel-x86_64/binaries/esl-sfetch -f KOG-all.fasta - > KOG*-seq.fa

% align extracted seqs to library file
/panfs/panspermia/125155/programs/hmmer-3.1b2-linux-intel-x86_64/binaries/hmmalign --outformat afa KOG*.hmm KOG*-seq.fa > KOG*-seq.aln.fa

%then process to turn into .nexus file and feed into beast 2
